package wtf.diablo.module.impl.Exploits;

import com.google.common.eventbus.Subscribe;
import lombok.Getter;
import lombok.Setter;
import net.minecraft.network.play.server.S08PacketPlayerPosLook;
import net.minecraft.network.play.server.S18PacketEntityTeleport;
import wtf.diablo.Diablo;
import wtf.diablo.events.EventType;
import wtf.diablo.events.impl.PacketEvent;
import wtf.diablo.gui.notifications.Notification;
import wtf.diablo.gui.notifications.NotificationType;
import wtf.diablo.module.data.Category;
import wtf.diablo.module.Module;
import wtf.diablo.module.ModuleManager;
import wtf.diablo.module.data.ServerType;
import wtf.diablo.module.impl.Movement.Fly;
import wtf.diablo.module.impl.Movement.LongJump;
import wtf.diablo.module.impl.Movement.Speed;
import wtf.diablo.utils.chat.ChatUtil;

@Getter
@Setter
public class AutoDisable extends Module {
    public AutoDisable() {
        super("AutoDisable", "Disable all modules on flag", Category.EXPLOIT, ServerType.All);
    }

    @Subscribe
    public void onPacket(PacketEvent e) {
        if (e.getType() == EventType.Incoming) {
            if (e.getPacket() instanceof S08PacketPlayerPosLook) {
                if(mc.thePlayer.ticksExisted < 100){
                    return;
                }

                Diablo.getInstance().addNotification(new Notification("Flag", "Disabled some modules due to flag", 2000, NotificationType.WARNING));
                if(ModuleManager.getModule(Speed.class).isToggled()) ModuleManager.getModule(Speed.class).setToggled(false);
                if(ModuleManager.getModule(Fly.class).isToggled()) ModuleManager.getModule(Fly.class).setToggled(false);
                if(ModuleManager.getModule(LongJump.class).isToggled()) ModuleManager.getModule(LongJump.class).setToggled(false);
            }
        }
    }
}
